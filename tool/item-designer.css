/* Item Designer â€“ Dark Theme */

input[type="number"]::-webkit-outer-spin-button,
input[type="number"]::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
input[type="number"] { -moz-appearance: textfield; }

/* â”€â”€ Layout â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.items-designer-container {
    display: flex;
    gap: 1.25rem;
    height: calc(100vh - 200px);
}

/* â”€â”€ Sidebar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.item-list-sidebar {
    flex: 0 0 340px;
    background: var(--bg-surface);
    border: 1px solid var(--border-default);
    border-radius: var(--radius-lg);
    padding: 0.875rem;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    overflow: hidden;
}

.item-tab-toggle {
    display: flex;
    border-radius: var(--radius-sm);
    overflow: hidden;
    border: 1px solid var(--border-default);
}

.tab-btn {
    flex: 1;
    padding: 0.5rem 0.75rem;
    background: var(--bg-elevated);
    border: none;
    color: var(--text-muted);
    font-weight: 600;
    font-size: 0.8125rem;
    cursor: pointer;
    transition: all 0.15s ease;
}

.tab-btn:hover { background: var(--bg-hover); color: var(--text-secondary); }
.tab-btn.active { background: var(--accent); color: #fff; }

.item-list-container { flex: 1; overflow-y: auto; }

.item-list-controls { display: flex; flex-direction: column; gap: 0.5rem; }

#itemSearch, #itemTypeFilter {
    padding: 0.5rem 0.625rem;
    background: var(--bg-elevated);
    border: 1px solid var(--border-default);
    border-radius: var(--radius-sm);
    color: var(--text-primary);
    font-size: 0.8125rem;
    font-family: inherit;
}
#itemSearch::placeholder { color: var(--text-muted); }
#itemSearch:focus, #itemTypeFilter:focus { outline: none; border-color: var(--accent); }

#itemList { flex: 1; overflow-y: auto; }

.item-list-item {
    background: var(--bg-elevated);
    border: 1px solid var(--border-subtle);
    border-radius: var(--radius-sm);
    padding: 0.625rem 0.75rem;
    cursor: pointer;
    transition: all 0.15s ease;
    margin-bottom: 0.375rem;
}
.item-list-item:hover { background: var(--bg-hover); border-color: var(--border-default); }
.item-list-item.selected { background: var(--accent-subtle); border-color: var(--accent); }

.item-name { color: var(--text-primary); font-weight: 600; font-size: 0.875rem; margin-bottom: 0.125rem; }
.item-type { color: var(--text-muted); font-size: 0.75rem; }

.item-list-buttons { display: flex; gap: 0.5rem; }

#newItemBtn {
    flex: 1; padding: 0.5rem;
    background: rgba(34,197,94,0.1); border: 1px solid rgba(34,197,94,0.25);
    border-radius: var(--radius-sm); color: var(--success);
    font-weight: 600; font-size: 0.8125rem; cursor: pointer; transition: all 0.15s ease;
}
#newItemBtn:hover { background: rgba(34,197,94,0.18); border-color: var(--success); }

#mergeItemsBtn, .btn-merge {
    flex: 1; padding: 0.5rem;
    background: var(--accent-subtle); border: 1px solid rgba(59,130,246,0.25);
    border-radius: var(--radius-sm); color: var(--accent);
    font-weight: 600; font-size: 0.8125rem; cursor: pointer; transition: all 0.15s ease;
}
#mergeItemsBtn:hover, .btn-merge:hover { background: rgba(59,130,246,0.18); border-color: var(--accent); }

.loading-text { color: var(--text-muted); text-align: center; padding: 2rem 1rem; font-size: 0.8125rem; }

/* â”€â”€ Editor Panel â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.item-editor-panel {
    flex: 1;
    background: var(--bg-surface);
    border: 1px solid var(--border-default);
    border-radius: var(--radius-lg);
    padding: 1.5rem;
    overflow-y: auto;
    overflow-x: visible;
}

#itemEditorTitle {
    color: var(--text-primary); font-size: 1.125rem; font-weight: 600;
    margin-bottom: 1.25rem; border-bottom: 1px solid var(--border-default); padding-bottom: 0.5rem;
}

#itemForm { display: flex; flex-direction: column; gap: 0.875rem; padding-bottom: 150px; }

/* â”€â”€ Unified Form Card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.item-unified-form {
    background: var(--bg-elevated); border: 1px solid var(--border-subtle);
    border-radius: var(--radius-md); padding: 1.25rem;
    display: flex; flex-direction: column; gap: 1.25rem; overflow: visible;
}

.item-header { display: flex; gap: 1.25rem; }

.item-icon-column { display: flex; flex-direction: column; align-items: center; gap: 0.5rem; }

.item-icon-box {
    width: 120px; height: 120px;
    background: var(--bg-surface); border: 1px dashed var(--border-default);
    border-radius: var(--radius-md);
    display: flex; align-items: center; justify-content: center;
    cursor: pointer; overflow: hidden; transition: all 0.15s ease;
}
.item-icon-box:hover { border-color: var(--accent); border-style: solid; }
.item-icon-box img { max-width: 100%; max-height: 100%; display: none; }
.item-icon-box img[src]:not([src=""]) { display: block; }
.item-icon-box img[src]:not([src=""]) ~ #itemIconPlaceholder { display: none; }

#itemIconPlaceholder { color: var(--text-muted); font-size: 0.75rem; text-align: center; padding: 0.75rem; }

.item-upload-btn {
    width: 120px; padding: 0.35rem 0.5rem; font-size: 0.75rem;
    background: var(--bg-elevated); border: 1px solid var(--border-default);
    border-radius: var(--radius-sm); color: var(--text-secondary);
    cursor: pointer; text-align: center; transition: all 0.15s ease;
}
.item-upload-btn:hover { border-color: var(--accent); color: var(--accent); }

.item-info { flex: 1; display: flex; flex-direction: column; gap: 0.625rem; }
.item-row { display: flex; gap: 0.75rem; }
.item-field { display: flex; flex-direction: column; gap: 0.2rem; }
.item-field-grow { flex: 1; }
.item-field-small { flex: 0 0 100px; }
.item-field-full { flex: 1; }

.item-field label {
    font-size: 0.6875rem; color: var(--text-muted);
    text-transform: uppercase; letter-spacing: 0.04em; font-weight: 500;
}

.item-field input, .item-field select, .item-field textarea {
    padding: 0.45rem 0.5rem; background: var(--bg-surface);
    border: 1px solid var(--border-default); border-radius: var(--radius-sm);
    color: var(--text-primary); font-size: 0.8125rem; font-family: inherit;
    transition: border-color 0.15s ease;
}
.item-field input:focus, .item-field select:focus, .item-field textarea:focus { outline: none; border-color: var(--accent); }
.item-field textarea { resize: none; }

/* â”€â”€ Stats â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.item-stats-section { border-top: 1px solid var(--border-subtle); padding-top: 0.875rem; }
.item-stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 0.35rem 0.75rem; }
.item-stats-grid.is-hidden { display: none; }
.stat-row { display: flex; align-items: center; gap: 0.35rem; }
.stat-row label { font-size: 0.6875rem; color: var(--text-muted); min-width: 55px; font-weight: 500; }

.stat-row input[type="number"] {
    width: 60px; padding: 0.3rem; text-align: center;
    background: var(--bg-surface); border: 1px solid var(--border-default);
    border-radius: var(--radius-sm); color: var(--text-primary);
    font-size: 0.8125rem; font-family: inherit;
}
.stat-row input[type="number"]:focus { outline: none; border-color: var(--accent); }

.socket-row { cursor: pointer; }
.socket-row:hover label { color: var(--accent); }
.socket-row input { width: 18px; height: 18px; cursor: pointer; accent-color: var(--accent); }
.socket-row label { color: var(--text-primary); cursor: pointer; flex: 0; }

#weaponStatsSection { display: none; margin-top: 0.625rem; }
#weaponStatsSection.hidden { display: none !important; }

.weapon-damage-row { display: flex; align-items: center; gap: 0.625rem; }
.weapon-damage-row label {
    font-size: 0.6875rem; color: var(--text-muted); min-width: 70px;
    text-transform: uppercase; letter-spacing: 0.04em; font-weight: 500;
}
.weapon-damage-inputs { display: flex; align-items: center; gap: 0.3rem; }
.weapon-damage-inputs input {
    width: 60px; padding: 0.3rem; text-align: center;
    background: var(--bg-surface); border: 1px solid var(--border-default);
    border-radius: var(--radius-sm); color: var(--text-primary);
    font-size: 0.8125rem; font-family: inherit;
}
.weapon-damage-inputs input:focus { outline: none; border-color: var(--accent); }
.weapon-damage-inputs span { color: var(--text-muted); font-weight: 600; }

/* â”€â”€ Effect â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.item-effect-section { border-top: 1px solid var(--border-subtle); padding-top: 0.875rem; }
.item-effect-section select { position: relative; }
#itemNotes::placeholder { color: var(--text-muted); }

/* â”€â”€ Form Buttons â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.item-form-buttons { display: flex; gap: 0.75rem; justify-content: flex-end; }

.btn-save-item, .btn-cancel-item {
    padding: 0.6rem 1.5rem; border: none; border-radius: var(--radius-sm);
    font-weight: 600; font-size: 0.875rem; cursor: pointer;
    transition: all 0.15s ease; font-family: inherit;
}
.btn-save-item { background: var(--accent); color: #fff; }
.btn-save-item:hover { background: var(--accent-hover); }
.btn-save-item.btn-disabled,
.btn-save-item:disabled {
    opacity: 0.35;
    cursor: not-allowed;
    pointer-events: none;
}
.btn-cancel-item {
    background: rgba(239,68,68,0.1); color: var(--danger);
    border: 1px solid rgba(239,68,68,0.2);
}
.btn-cancel-item:hover { background: rgba(239,68,68,0.18); border-color: var(--danger); }

input[type="text"], input[type="number"], select, textarea { font-family: inherit; }

.item-stat-group { display: flex; flex-direction: column; gap: 0.25rem; }
.item-stat-group label { font-size: 0.8125rem; color: var(--text-secondary); font-weight: 600; }
.item-stat-input {
    padding: 0.45rem 0.5rem; border: 1px solid var(--border-default);
    border-radius: var(--radius-sm); background: var(--bg-surface);
    color: var(--text-primary); font-size: 0.875rem; text-align: center;
    width: 100%; font-family: inherit;
}
.item-stat-input:focus { outline: none; border-color: var(--accent); }

.item-damage-section { margin-top: 0.875rem; padding-top: 0.875rem; border-top: 1px solid var(--border-subtle); }
.item-damage-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 0.625rem; }

.item-effect-row { display: grid; grid-template-columns: 2fr 1fr; gap: 0.75rem; align-items: start; }
.item-effect-row select { width: 100%; }
.item-effect-description {
    display: block; margin-top: 0.375rem; font-size: 0.8125rem;
    color: var(--text-muted); font-style: italic; grid-column: 1 / -1;
}

.item-options-section { margin-top: 1rem; padding-top: 0.875rem; border-top: 1px solid var(--border-subtle); }
.item-options-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.75rem; }
.item-checkbox-group { display: flex; align-items: center; gap: 0.5rem; }
.item-checkbox-group input[type="checkbox"] { width: 18px; height: 18px; accent-color: var(--accent); }

.item-description-container { display: flex; flex-direction: column; }
.item-description-container h3 {
    color: var(--text-primary); margin-bottom: 0.625rem; font-size: 0.9375rem;
    font-weight: 600; border-bottom: 1px solid var(--border-subtle); padding-bottom: 0.375rem;
}
.item-description-container textarea { flex: 1; min-height: 200px; resize: vertical; }

.item-action-buttons-top { position: absolute; top: 1rem; right: 1rem; display: flex; gap: 0.625rem; z-index: 10; }

.item-save-btn, .item-reset-btn {
    padding: 0.5rem 1rem; font-size: 0.8125rem; font-weight: 600;
    border: 1px solid; border-radius: var(--radius-sm); cursor: pointer;
    transition: all 0.15s ease; font-family: inherit;
}
.item-save-btn { background: var(--accent); border-color: var(--accent); color: #fff; }
.item-save-btn:hover { background: var(--accent-hover); }
.item-reset-btn { background: var(--bg-elevated); border-color: var(--border-default); color: var(--text-secondary); }
.item-reset-btn:hover { background: var(--bg-hover); border-color: var(--text-muted); }

/* Custom dropdown */
.item-custom-dropdown {
    position: absolute; top: 100%; left: 0; right: 0;
    background: var(--bg-elevated); border: 1px solid var(--border-default);
    border-top: none; border-radius: 0 0 var(--radius-sm) var(--radius-sm);
    max-height: 200px; overflow-y: auto; z-index: 1000;
    box-shadow: 0 4px 16px rgba(0,0,0,0.4);
}
.item-custom-dropdown .dropdown-option {
    padding: 0.5rem 0.75rem; color: var(--text-primary); cursor: pointer;
    border-bottom: 1px solid var(--border-subtle); transition: background 0.1s ease; font-size: 0.8125rem;
}
.item-custom-dropdown .dropdown-option:hover { background: var(--accent-subtle); color: var(--accent); }
.item-custom-dropdown .dropdown-option:last-child { border-bottom: none; }

.item-input-with-dropdown { position: relative; display: flex; align-items: stretch; }
.item-input-with-dropdown input { flex: 1; border-radius: var(--radius-sm) 0 0 var(--radius-sm); }
.item-dropdown-button {
    padding: 0 0.625rem; background: var(--bg-elevated);
    border: 1px solid var(--border-default); border-left: none;
    border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
    color: var(--text-secondary); cursor: pointer; transition: all 0.15s ease;
}
.item-dropdown-button:hover { background: var(--bg-hover); color: var(--accent); }

/* â”€â”€ List Sections â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.item-list-section { margin-bottom: 1rem; }
.item-list-section h3 {
    color: var(--text-secondary); font-size: 0.75rem; font-weight: 600;
    text-transform: uppercase; letter-spacing: 0.05em;
    margin-bottom: 0.5rem; padding-bottom: 0.375rem; border-bottom: 1px solid var(--border-subtle);
}
.item-list-section.pending-section h3 { color: #f59e0b; }

/* â”€â”€ Pending Items â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.pending-item {
    background: rgba(245,158,11,0.06); border: 1px solid rgba(245,158,11,0.2);
    border-radius: var(--radius-sm); padding: 0.625rem 0.75rem;
    cursor: pointer; transition: all 0.15s ease; margin-bottom: 0.375rem;
}
.pending-item:hover { background: rgba(245,158,11,0.1); border-color: rgba(245,158,11,0.35); }
.pending-item.selected { background: rgba(245,158,11,0.12); border-color: #f59e0b; }

.pending-item-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.2rem; }
.pending-item-name { color: #fbbf24; font-weight: 600; font-size: 0.875rem; }

.item-action {
    font-size: 0.625rem; padding: 0.125rem 0.4rem; border-radius: 3px;
    font-weight: 700; text-transform: uppercase; letter-spacing: 0.03em;
}
.item-action.insert { background: rgba(34,197,94,0.12); color: var(--success); border: 1px solid rgba(34,197,94,0.25); }
.item-action.update { background: var(--accent-subtle); color: var(--accent); border: 1px solid rgba(59,130,246,0.25); }

.pending-item-type { color: var(--text-muted); font-size: 0.75rem; }
.pending-item-footer {
    display: flex; justify-content: space-between; align-items: center;
    margin-top: 0.375rem; padding-top: 0.375rem; border-top: 1px solid var(--border-subtle);
}
.pending-item-actions { display: flex; align-items: center; gap: 0.625rem; }

.btn-remove-pending {
    background: transparent; border: 1px solid rgba(239,68,68,0.25); border-radius: 4px;
    padding: 3px 5px; cursor: pointer; color: var(--danger);
    transition: all 0.15s ease; display: flex; align-items: center; justify-content: center;
}
.btn-remove-pending svg { width: 14px; height: 14px; }
.btn-remove-pending:hover { background: rgba(239,68,68,0.1); border-color: var(--danger); }

.approve-checkbox { display: flex; align-items: center; gap: 0.4rem; cursor: pointer; }
.approve-checkbox input[type="checkbox"] { width: 16px; height: 16px; cursor: pointer; accent-color: var(--success); }
.approve-checkbox span { font-size: 0.75rem; color: var(--text-muted); }
.approve-checkbox:hover span { color: var(--text-secondary); }

/* â”€â”€ Locked Form â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.form-locked { position: relative; }
.form-locked::before {
    content: 'ðŸ”’ Read Only â€“ Pending Approval'; display: block;
    background: rgba(245,158,11,0.08); border: 1px solid rgba(245,158,11,0.25);
    border-radius: var(--radius-sm); padding: 0.4rem 0.75rem;
    color: #fbbf24; text-align: center; font-weight: 600; font-size: 0.8125rem; margin-bottom: 0.75rem;
}
.form-locked input:disabled, .form-locked select:disabled, .form-locked textarea:disabled {
    background: var(--bg-base) !important; color: var(--text-muted) !important; cursor: not-allowed; opacity: 0.6;
}
.form-locked input[type="checkbox"]:disabled { cursor: not-allowed; opacity: 0.4; }

/* â”€â”€ Icon Section â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.item-icon-section { display: flex; align-items: center; gap: 1.25rem; }

.item-icon-preview {
    width: 72px; height: 72px; background: var(--bg-elevated);
    border: 1px dashed var(--border-default); border-radius: var(--radius-md);
    display: flex; align-items: center; justify-content: center;
    overflow: hidden; cursor: pointer; transition: all 0.15s ease;
}
.item-icon-preview:hover { border-color: var(--accent); border-style: solid; }
.item-icon-preview.drag-over { border-color: var(--success); border-style: solid; background: rgba(34,197,94,0.08); }
.item-icon-preview img { max-width: 100%; max-height: 100%; object-fit: contain; display: none; }
.item-icon-preview img[src]:not([src=""]) { display: block; }

.item-icon-info { display: flex; flex-direction: column; gap: 0.375rem; }
.item-icon-buttons { display: flex; gap: 0.375rem; }
#itemAssetIDDisplay { color: var(--text-secondary); font-size: 0.8125rem; }

.btn-browse-assets {
    padding: 0.4rem 0.75rem; background: var(--bg-elevated);
    border: 1px solid var(--border-default); border-radius: var(--radius-sm);
    color: var(--text-secondary); font-weight: 600; font-size: 0.75rem;
    cursor: pointer; transition: all 0.15s ease;
}
.btn-browse-assets:hover { border-color: var(--accent); color: var(--accent); }

.btn-upload-new {
    padding: 0.4rem 0.75rem; background: rgba(34,197,94,0.08);
    border: 1px solid rgba(34,197,94,0.2); border-radius: var(--radius-sm);
    color: var(--success); font-weight: 600; font-size: 0.75rem;
    cursor: pointer; transition: all 0.15s ease;
}
.btn-upload-new:hover { background: rgba(34,197,94,0.15); border-color: var(--success); }

/* â”€â”€ Asset Gallery Overlay â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.item-asset-gallery-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.7); display: flex; align-items: center; justify-content: center;
    z-index: 1000; backdrop-filter: blur(4px);
}
.item-asset-gallery-overlay.hidden { display: none; }

.item-asset-gallery {
    background: var(--bg-surface); border: 1px solid var(--border-default);
    border-radius: var(--radius-lg); width: 90%; max-width: 720px; max-height: 80vh;
    display: flex; flex-direction: column; box-shadow: 0 16px 48px rgba(0,0,0,0.5);
}

.item-asset-gallery-header {
    display: flex; justify-content: space-between; align-items: center;
    padding: 0.875rem 1.25rem; border-bottom: 1px solid var(--border-default);
}
.item-asset-gallery-header h3 { color: var(--text-primary); font-size: 0.9375rem; font-weight: 600; margin: 0; }

.asset-gallery-close {
    background: transparent; border: none; color: var(--text-muted);
    font-size: 1.25rem; cursor: pointer; padding: 0.25rem 0.5rem; transition: color 0.15s ease;
}
.asset-gallery-close:hover { color: var(--danger); }

.item-asset-grid {
    display: grid; grid-template-columns: repeat(auto-fill, minmax(90px, 1fr));
    gap: 0.75rem; padding: 1.25rem; overflow-y: auto; flex: 1;
}

.item-asset-item {
    background: var(--bg-elevated); border: 1px solid var(--border-subtle);
    border-radius: var(--radius-sm); padding: 0.5rem; cursor: pointer;
    transition: all 0.15s ease; display: flex; flex-direction: column;
    align-items: center; gap: 0.375rem;
}
.item-asset-item:hover { border-color: var(--accent); background: var(--bg-hover); }
.item-asset-thumbnail { width: 56px; height: 56px; object-fit: contain; }
.item-asset-label { color: var(--text-muted); font-size: 0.6875rem; text-align: center; }
